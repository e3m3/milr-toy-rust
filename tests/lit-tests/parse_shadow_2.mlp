// RUN: @mlpc --verbose=parser --parse %s 2>&1 | @filecheck %s

def test() {
    var bar<> = [1, 2];
    var foo<> = [2, 3];                         // Symbol 'foo' is inserted with '<2xf64>'
    return bar + foo;
}

def main() {
    var foo<3,2> = [[1, 2], [3, 4], [5, 6]];    // Symbol 'foo' is inserted with '<3x2xf64>'

    print(test());                              // Print is specialized for type signature
                                                // 'fn(<2xf64> -> ())'
    print(foo);                                 // Print is specialized for type signature
}                                               // 'fn(<3x2xf64> -> ())'

// CHECK: Consumed expected token 'Def:def' at position '0'
// CHECK: Consumed expected token 'Ident:test' at position '1'
// CHECK: Consumed expected token 'ParenL:(' at position '2'
// CHECK: Consumed expected token 'ParenR:)' at position '3'
// CHECK: Consumed expected token 'BraceL:{' at position '4'
// CHECK: Consumed expected token 'Var:var' at position '5'
// CHECK: Consumed expected token 'Ident:bar' at position '6'
// CHECK: Consumed expected token 'AngleL:<' at position '7'
// CHECK: Consumed expected token 'AngleR:>' at position '8'
// CHECK: Consumed expected token 'Assign:=' at position '9'
// CHECK: Consumed expected token 'BracketL:[' at position '10'
// CHECK: Consumed expected token 'Number:1' at position '11'
// CHECK: Consumed expected token 'Comma:,' at position '12'
// CHECK: Consumed expected token 'Number:2' at position '13'
// CHECK: Consumed expected token 'BracketR:]' at position '14'
// CHECK: Consumed expected token 'Semicolon:;' at position '15'
// CHECK: Consumed expected token 'Var:var' at position '16'
// CHECK: Consumed expected token 'Ident:foo' at position '17'
// CHECK: Consumed expected token 'AngleL:<' at position '18'
// CHECK: Consumed expected token 'AngleR:>' at position '19'
// CHECK: Consumed expected token 'Assign:=' at position '20'
// CHECK: Consumed expected token 'BracketL:[' at position '21'
// CHECK: Consumed expected token 'Number:2' at position '22'
// CHECK: Consumed expected token 'Comma:,' at position '23'
// CHECK: Consumed expected token 'Number:3' at position '24'
// CHECK: Consumed expected token 'BracketR:]' at position '25'
// CHECK: Consumed expected token 'Semicolon:;' at position '26'
// CHECK: Consumed expected token 'Return:return' at position '27'
// CHECK: Consumed expected token 'Ident:bar' at position '28'
// CHECK: Consumed expected token 'Plus:+' at position '29'
// CHECK: Consumed expected token 'Ident:foo' at position '30'
// CHECK: Consumed expected token 'Semicolon:;' at position '31'
// CHECK: Consumed expected token 'BraceR:}' at position '32'
// CHECK: Consumed expected token 'Def:def' at position '33'
// CHECK: Consumed expected token 'Ident:main' at position '34'
// CHECK: Consumed expected token 'ParenL:(' at position '35'
// CHECK: Consumed expected token 'ParenR:)' at position '36'
// CHECK: Consumed expected token 'BraceL:{' at position '37'
// CHECK: Consumed expected token 'Var:var' at position '38'
// CHECK: Consumed expected token 'Ident:foo' at position '39'
// CHECK: Consumed expected token 'AngleL:<' at position '40'
// CHECK: Consumed expected token 'Number:3' at position '41'
// CHECK: Consumed expected token 'Comma:,' at position '42'
// CHECK: Consumed expected token 'Number:2' at position '43'
// CHECK: Consumed expected token 'AngleR:>' at position '44'
// CHECK: Consumed expected token 'Assign:=' at position '45'
// CHECK: Consumed expected token 'BracketL:[' at position '46'
// CHECK: Consumed expected token 'BracketL:[' at position '47'
// CHECK: Consumed expected token 'Number:1' at position '48'
// CHECK: Consumed expected token 'Comma:,' at position '49'
// CHECK: Consumed expected token 'Number:2' at position '50'
// CHECK: Consumed expected token 'BracketR:]' at position '51'
// CHECK: Consumed expected token 'Comma:,' at position '52'
// CHECK: Consumed expected token 'BracketL:[' at position '53'
// CHECK: Consumed expected token 'Number:3' at position '54'
// CHECK: Consumed expected token 'Comma:,' at position '55'
// CHECK: Consumed expected token 'Number:4' at position '56'
// CHECK: Consumed expected token 'BracketR:]' at position '57'
// CHECK: Consumed expected token 'Comma:,' at position '58'
// CHECK: Consumed expected token 'BracketL:[' at position '59'
// CHECK: Consumed expected token 'Number:5' at position '60'
// CHECK: Consumed expected token 'Comma:,' at position '61'
// CHECK: Consumed expected token 'Number:6' at position '62'
// CHECK: Consumed expected token 'BracketR:]' at position '63'
// CHECK: Consumed expected token 'BracketR:]' at position '64'
// CHECK: Consumed expected token 'Semicolon:;' at position '65'
// CHECK: Consumed expected token 'Print:print' at position '66'
// CHECK: Consumed expected token 'ParenL:(' at position '67'
// CHECK: Consumed expected token 'Ident:test' at position '68'
// CHECK: Consumed expected token 'ParenL:(' at position '69'
// CHECK: Consumed expected token 'ParenR:)' at position '70'
// CHECK: Consumed expected token 'ParenR:)' at position '71'
// CHECK: Consumed expected token 'Semicolon:;' at position '72'
// CHECK: Consumed expected token 'Print:print' at position '73'
// CHECK: Consumed expected token 'ParenL:(' at position '74'
// CHECK: Consumed expected token 'Ident:foo' at position '75'
// CHECK: Consumed expected token 'ParenR:)' at position '76'
// CHECK: Consumed expected token 'Semicolon:;' at position '77'
// CHECK: Consumed expected token 'BraceR:}' at position '78'
// CHECK: Consumed expected token 'Eoi:' at position '79'
